(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"2d52":function(t,e,i){"use strict";i("e60f")},"7b7f":function(t,e,i){},"7e96":function(t,e,i){"use strict";i("7b7f")},d467:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",{staticClass:"flex flex-center full-height-width"},[i("tool-group",{staticClass:"tool-group"}),t.water_fall.show?i("vue-waterfall-easy",{ref:"waterfall",attrs:{maxCols:t.maxCols,"imgs-arr":t.water_fall.img_urls,loadingTimeOut:t.water_fall.loadingTimeOut,loadingDotCount:t.water_fall.loadingDotCount,reachBottomDistance:t.reach_bottom_distance},on:{imgError:t.imgErrorEvent,scrollReachBottom:t.loadMore},scopedSlots:t._u([{key:"default",fn:function(e){return t.show_pic_title?i("span",{staticClass:"some-info"},[t._v("\n      "+t._s(e.value.info)+"\n    ")]):t._e()}}],null,!0)},[i("div",{attrs:{slot:"waterfall-over"},slot:"waterfall-over"},[t._v("\n      "+t._s(t.$t("waterfallOver"))+"\n    ")])]):t._e()],1)},a=[],s=(i("fb6a"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",t._l(t.toolButtonGroup,(function(t){return i("tool-button",{key:t.btnColor,attrs:{"btn-icon":t.btnIcon,"btn-color":t.btnColor,"btn-on-click":t.btnOnClick,"tooltip-message":t.tooltipMessage}})})),1):t._e()}),n=[],l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("q-btn",{attrs:{icon:t.btnIcon,color:t.btnColor,round:t.btnRound},on:{click:t.btnOnClick}},[0!==t.tooltipMessage.length?i("q-tooltip",{attrs:{anchor:t.tooltipAnchor,self:t.tooltipSelf}},[t._v("\n      "+t._s(t.tooltipMessage)+"\n    ")]):t._e()],1)],1)},r=[],c={name:"ToolButton",props:{btnOnClick:{type:Function,required:!0},btnIcon:{type:String,required:!0},btnColor:{type:String,required:!0,default:"primary"},btnRound:{type:Boolean,required:!1,default:!0},tooltipMessage:{type:String,required:!0,default:""},tooltipAnchor:{type:String,required:!1,default:"center left"},tooltipSelf:{type:String,required:!1,default:"center right"}}},u=c,h=i("2877"),d=i("9c40"),g=i("05c0"),p=i("eebe"),b=i.n(p),f=Object(h["a"])(u,l,r,!1,null,"3d48beb4",null),m=f.exports;b()(f,"components",{QBtn:d["a"],QTooltip:g["a"]});var _={name:"ToolGroup",components:{ToolButton:m},data(){return{show:!0,toolButtonGroup:[{btnOnClick:this.top,btnIcon:"navigation",btnColor:"primary",tooltipMessage:""},{btnOnClick:this.nextNode,btnIcon:"redo",btnColor:"cyan-5",tooltipMessage:""},{btnOnClick:this.loadMore,btnIcon:"replay_10",btnColor:"warning",tooltipMessage:""},{btnOnClick:this.leftDrawer,btnIcon:"open_in_new",btnColor:"pink-3",tooltipMessage:""},{btnOnClick:this.setting,btnIcon:"settings",btnColor:"secondary",tooltipMessage:""}]}},computed:{refresh:function(){return this.$store.getters["uiControl/language"]}},watch:{refresh:function(){this.updateLanguageCache()}},beforeMount(){this.updateLanguageCache()},methods:{updateLanguageCache:function(){const t=[this.$t("top"),this.$t("next_one"),this.$t("loadManual"),this.$t("open_drawer"),this.$t("setting")];this.toolButtonGroup.forEach(((e,i)=>{e.tooltipMessage=t[i]}))},top:function(){this.$log.debug("goto top"),this.$bus.$emit("btn_click_goto_top")},nextNode:function(){this.$log.debug("nextNode"),this.$bus.$emit("btn_click_nextNode")},loadMore:function(){this.$log.debug("loadMore"),this.$bus.$emit("btn_click_loadMore")},leftDrawer:function(){this.$store.dispatch("uiControl/reverseLeftDrawerOpen")},setting:function(){this.$log.debug("setting"),this.$bus.$emit("btn_click_setting")}}},$=_,w=Object(h["a"])($,s,n,!1,null,"c12ae8f0",null),C=w.exports,v=i("6dc5"),y=i.n(v),k=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("q-dialog",{ref:"dialog",on:{hide:t.onDialogHide}},[i("q-card",{staticClass:"pic_settings_card"},[i("q-tabs",{staticClass:"text-teal",attrs:{"active-bg-color":"pink-1","active-color":"pink-4","indicator-color":"pink-5"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[i("q-tab",{attrs:{label:t.$t("api_setting"),name:"api"}}),i("q-tab",{attrs:{label:t.$t("ui_setting"),name:"ui"}}),i("q-tab",{attrs:{label:t.$t("about"),name:"about"}})],1),i("q-separator"),i("q-tab-panels",{attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[i("q-tab-panel",{attrs:{name:"api"}},[i("pic-settings-api")],1),i("q-tab-panel",{attrs:{name:"ui"}},[i("pic-settings-u-i")],1),i("q-tab-panel",{attrs:{name:"about"}},[i("pic-settings-about",{attrs:{name:t.authorInfo.repo.name,author:t.authorInfo.repo.author}})],1)],1),i("q-separator"),i("q-card-section",{staticStyle:{height:"25px","text-align":"center",padding:"2px"}},[i("div",[i("a",{attrs:{href:t.authorInfo.repo.url,target:"_blank"}},[i("q-badge",{attrs:{color:t.badge.color,"text-color":t.badge.text_color,outline:""}},[t._v("\n                "+t._s(t.authorInfo.repo.url)+"\n              ")])],1)])])],1)],1)],1)},q=[],x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("q-card-section",[i("q-form",{staticClass:"q-gutter-md",on:{submit:t.onSubmit,reset:t.onReset}},[i("q-card-section",[i("q-select",{staticStyle:{"min-width":"7rem"},attrs:{label:t.$t("tree_request_method"),options:t.api.tree.selectOptions,color:"pink",dark:!1,"options-dark":!1,dense:"","options-dense":!1,"emit-value":"","map-options":""},model:{value:t.api.tree.method,callback:function(e){t.$set(t.api.tree,"method",e)},expression:"api.tree.method"}}),i("q-input",{attrs:{label:t.$t("tree_request_url"),hint:t.api.tree.hint,"lazy-rules":!0,rules:t.api.validate.rules},model:{value:t.api.tree.url,callback:function(e){t.$set(t.api.tree,"url",e)},expression:"api.tree.url"}})],1),i("q-card-section",[i("q-select",{staticStyle:{"min-width":"7rem"},attrs:{label:t.$t("pic_request_method"),options:t.api.pic.selectOptions,color:"pink",dark:!1,"options-dark":!1,dense:"","options-dense":!1,"emit-value":"","map-options":""},model:{value:t.api.pic.method,callback:function(e){t.$set(t.api.pic,"method",e)},expression:"api.pic.method"}}),i("q-input",{attrs:{hint:t.api.pic.hint,label:t.$t("pic_request_url"),"lazy-rules":!0,rules:t.api.validate.rules},model:{value:t.api.pic.url,callback:function(e){t.$set(t.api.pic,"url",e)},expression:"api.pic.url"}})],1),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{label:t.$t("submit"),type:"submit",color:"primary"}}),i("q-btn",{attrs:{label:t.$t("reset"),type:"reset",color:"warning"},on:{dblclick:t.onResetDbClick}})],1)],1)],1)],1)},S=[],T={name:"PicSettingsApi",data(){return{api:{tree:{method:"",url:"",hint:"https://api.example.com:8000/tree",selectOptions:[{value:"GET",label:"GET",disable:!1},{value:"POST",label:"POST",disable:!0}]},pic:{method:"",url:"",hint:"https://api.example.com:8000/pic",selectOptions:[{value:"GET",label:"GET",disable:!0},{value:"POST",label:"POST",disable:!1}]},validate:{rules:[t=>t.length>0||this.$t("data_validate_error")]}}}},methods:{reset:function(){this.$log.debug("Reset form's values base on Vuex Store and localStorage"),this.api.tree.method=this.$store.getters["apiSetting/treeMethod"],this.api.tree.url=this.$store.getters["apiSetting/treeUrl"],this.api.pic.method=this.$store.getters["apiSetting/picMethod"],this.api.pic.url=this.$store.getters["apiSetting/picUrl"]},onSubmit:function(){this.$log.debug("submit"),this.$store.dispatch("apiSetting/setTreeMethod",this.api.tree.method),this.$store.dispatch("apiSetting/setTreeUrl",this.api.tree.url),this.$store.dispatch("apiSetting/setPicMethod",this.api.pic.method),this.$store.dispatch("apiSetting/setPicUrl",this.api.pic.url),this.$q.notify({message:this.$t("success"),type:"positive",closeBtn:!1,actions:[{label:this.$t("reload_page"),color:"white",handler:()=>{window.location.reload()}}]})},onReset:function(){this.$log.debug("reset"),this.reset(),this.$q.notify({message:this.$t("success"),caption:this.$t("double_click_to_clean_all"),type:"info"})},onResetDbClick:function(){this.$log.debug("Double Click..."),localStorage.clear(),this.$q.notify({message:this.$t("success"),type:"info",closeBtn:!1,actions:[{label:this.$t("reload_page"),color:"white",handler:()=>{window.location.reload()}}]})}},mounted(){this.reset()}},I=T,O=i("a370"),M=i("0378"),Q=i("ddd8"),E=i("27f9"),K=i("4b7e"),P=Object(h["a"])(I,x,S,!1,null,"17160c33",null),D=P.exports;b()(P,"components",{QCardSection:O["a"],QForm:M["a"],QSelect:Q["a"],QInput:E["a"],QCardActions:K["a"],QBtn:d["a"]});var L=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("q-card-section",[i("q-form",{staticClass:"q-gutter-md",on:{submit:t.onSubmit,reset:t.onReset}},[i("q-card-section",[i("q-input",{attrs:{label:t.$t("node_key_value"),hint:t.$t("do_not_touch"),type:"number","lazy-rules":!0,rules:t.validate.rules.greaterOrEqualZero},model:{value:t.nodeKey,callback:function(e){t.nodeKey=e},expression:"nodeKey"}}),i("q-input",{attrs:{label:t.$t("waterfall_col"),type:"number","lazy-rules":!0,rules:t.validate.rules.greaterThanZero},model:{value:t.waterfallCol,callback:function(e){t.waterfallCol=e},expression:"waterfallCol"}}),i("q-input",{attrs:{label:t.$t("waterfall_stride"),type:"number","lazy-rules":!0,rules:t.validate.rules.greaterThanZero},model:{value:t.waterfallStride,callback:function(e){t.waterfallStride=e},expression:"waterfallStride"}}),i("q-input",{attrs:{label:t.$t("img_title_max_length"),type:"number","lazy-rules":!0,rules:t.validate.rules.greaterThanZero},model:{value:t.imgTitleMaxLength,callback:function(e){t.imgTitleMaxLength=e},expression:"imgTitleMaxLength"}})],1),i("q-card-section",[i("q-toggle",{attrs:{"checked-icon":"check",color:"pink",label:t.$t("show_img_title_or_not")+": "+t.showImgTitle,"unchecked-icon":"clear"},model:{value:t.showImgTitle,callback:function(e){t.showImgTitle=e},expression:"showImgTitle"}})],1),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{label:t.$t("submit"),type:"submit",color:"primary"}}),i("q-btn",{attrs:{label:t.$t("reset"),type:"reset",color:"warning"},on:{dblclick:t.onResetDbClick}})],1)],1)],1)],1)},B=[],R={name:"PicSettingsUI",data(){return{nodeKey:0,showImgTitle:!1,waterfallCol:0,waterfallStride:0,imgTitleMaxLength:0,validate:{rules:{greaterThanZero:[t=>t>0||this.$t("data_validate_error")],greaterOrEqualZero:[t=>t>=0||this.$t("data_validate_error")]}}}},methods:{reset:function(){this.$log.debug("Reset form's values base on Vuex Store and localStorage"),this.nodeKey=this.$store.getters["uiControl/nodeKey"],this.waterfallCol=this.$store.getters["uiControl/waterfallCol"],this.waterfallStride=this.$store.getters["uiControl/waterfallStride"],this.imgTitleMaxLength=this.$store.getters["uiControl/imgTitleMaxLength"],this.showImgTitle=this.$store.getters["uiControl/showImgTitle"]},onSubmit:function(){this.$log.debug("submit"),this.$store.dispatch("uiControl/setNodeKey",this.nodeKey),this.$store.dispatch("uiControl/setWaterfallCol",this.waterfallCol),this.$store.dispatch("uiControl/setWaterfallStride",this.waterfallStride),this.$store.dispatch("uiControl/setImgTitleMaxLength",this.imgTitleMaxLength),this.$store.dispatch("uiControl/setShowImgTitle",this.showImgTitle),this.$q.notify({message:this.$t("success"),type:"positive",closeBtn:!1,actions:[{label:this.$t("reload_page"),color:"white",handler:()=>{window.location.reload()}}]})},onReset:function(){this.$log.debug("reset"),this.reset(),this.$q.notify({message:this.$t("success"),caption:this.$t("double_click_to_clean_all"),type:"info"})},onResetDbClick:function(){this.$log.debug("Double Click..."),localStorage.clear(),this.$q.notify({message:this.$t("success"),type:"info",closeBtn:!1,actions:[{label:this.$t("reload_page"),color:"white",handler:()=>{window.location.reload()}}]})}},mounted(){this.reset()}},G=R,j=i("9564"),A=Object(h["a"])(G,L,B,!1,null,"1f358a02",null),N=A.exports;b()(A,"components",{QCardSection:O["a"],QForm:M["a"],QInput:E["a"],QToggle:j["a"],QCardActions:K["a"],QBtn:d["a"]});var U=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("q-card",{staticClass:"bg-secondary text-white"},[i("q-card-section",[i("div",{staticClass:"text-h6"},[t._v(t._s(t.name))]),i("div",{staticClass:"text-subtitle3"},[t._v(t._s(t.author))])]),i("q-card-section",[t._v("\n      "+t._s(t.$t("repo_description"))+"\n    ")])],1)],1)},z=[],F={name:"PicSettingsAbout",props:{name:{type:String,required:!1,default:"Pic Online"},author:{type:String,required:!1,default:"Github@IITII"}}},W=F,Z=i("f09f"),J=Object(h["a"])(W,U,z,!1,null,"6ce25203",null),H=J.exports;b()(J,"components",{QCard:Z["a"],QCardSection:O["a"]});var V={name:"PicSettings",components:{PicSettingsAbout:H,PicSettingsUI:N,PicSettingsApi:D},data(){return{authorInfo:{repo:{name:"Pic Online",url:"https://github.com/iitii/pic_online",author:"Github@IITII"}},badge:{color:"pink",text_color:"white"},tab:"about"}},methods:{show(){this.$log.debug("show"),this.$refs.dialog.show()},hide(){this.$log.debug("hide"),this.$refs.dialog.hide()},onDialogHide(){this.$log.debug("hide"),this.$emit("hide")},onOKClick(){this.$log.debug("onClick"),this.$emit("ok"),this.hide()},onCancelClick(){this.$log.debug("onCancelClick"),this.hide()}}},X=V,Y=(i("7e96"),i("24e8")),tt=i("429b"),et=i("7460"),it=i("eb85"),ot=i("adad"),at=i("823b"),st=i("58a81"),nt=Object(h["a"])(X,k,q,!1,null,"2c8aadb0",null),lt=nt.exports;b()(nt,"components",{QDialog:Y["a"],QCard:Z["a"],QTabs:tt["a"],QTab:et["a"],QSeparator:it["a"],QTabPanels:ot["a"],QTabPanel:at["a"],QCardSection:O["a"],QBadge:st["a"]});var rt={name:"PageIndex",components:{ToolGroup:C,vueWaterfallEasy:y.a},data(){return{water_fall:{show:!0,nodeKey:1,lowIndex:0,highIndex:0,img_urls:[],current_img_array:[],loadingDotCount:3,loadingTimeOut:500}}},methods:{imgErrorEvent:function(t){this.$q.notify({message:this.$t("img_load_error"),caption:`${t.src}`,type:"warning"})},beforeunloadFn:function(t){this.$log.debug(`before unload function ${t}`)},rebuildWaterfall:function(){this.water_fall.show=!1,setTimeout((()=>{this.water_fall.show=!0,0===this.water_fall.img_urls.length&&this.loadMore()}),1)},btn_click_goto_top:function(){this.$log.debug("btn_click_goto_top listener"),this.rebuildWaterfall()},resetConfig:function(){this.$log.debug("Reset config"),this.water_fall.lowIndex=0,this.water_fall.highIndex=this.water_fall.lowIndex+this.stride,this.water_fall.current_img_array=[],this.water_fall.img_urls=[]},showSettings:function(){this.$log.debug("Showing setting dialog..."),this.$q.dialog({component:lt,parent:this,text:"something"}).onOk((()=>{this.$log.debug("OK")})).onCancel((()=>{this.$log.debug("Cancel")})).onDismiss((()=>{this.$log.debug("Called on OK or Cancel")}))},convertToTree:function(t){return t.map((t=>{let e=t.split("/").pop().split(".");return e.pop(),e=e.join(".").slice(0,this.maxTitleLength),{src:t,href:t,info:e}}))},loadMore:function(){const t=this.$store.getters["apiSetting/picUrl"],e=this.$store.getters["apiSetting/picMethod"];let i;const o={nodeKey:this.nodeKeyComputed,low:this.water_fall.lowIndex,high:this.water_fall.highIndex};switch(e){case"GET":i=this.$axios.get(t);break;case"POST":default:this.$log.debug(`nodeKey: ${this.nodeKeyComputed}`),this.$log.debug(`post data: ${JSON.stringify(o)}`),i=this.$axios.post(t,o);break}i.then((t=>(this.$log.debug(`axios post response: ${JSON.stringify(t)}`),this.water_fall.lowIndex=this.water_fall.highIndex,this.water_fall.highIndex+=this.stride,t.data))).then((t=>(this.water_fall.current_img_array=t,this.water_fall.img_urls=this.water_fall.img_urls.concat(this.convertToTree(t)),t))).then((t=>{t.length<this.stride&&(this.$refs.waterfall.waterfallOver(),this.$q.notify({message:this.$t("waterfallOver"),caption:this.$t("no_more_pic"),type:"info"}))})).catch((t=>{this.$q.notify({message:this.$t("waterfall_load_error"),caption:`${t.message}`,type:"negative"})}))}},computed:{nodeKeyComputed:function(){return this.$store.getters["uiControl/nodeKey"]},stride:function(){return this.$store.getters["uiControl/waterfallStride"]},reach_bottom_distance:function(){const t=.3;return screen.height*t},show_pic_title:function(){return this.$store.getters["uiControl/showImgTitle"]},maxTitleLength:function(){return this.$store.getters["uiControl/imgTitleMaxLength"]},maxCols:function(){return this.$store.getters["uiControl/waterfallCol"]}},watch:{nodeKeyComputed:function(t){this.$log.debug(`nodeKey updated: ${t}`),this.resetConfig(),this.rebuildWaterfall()}},beforeMount(){this.resetConfig()},mounted(){this.$log.debug(this.$refs),this.loadMore()},created(){window.addEventListener("beforeunload",(t=>this.beforeunloadFn(t))),this.$bus.$on("btn_click_goto_top",this.btn_click_goto_top),this.$bus.$on("btn_click_loadMore",this.loadMore),this.$bus.$on("btn_click_setting",this.showSettings)},destroyed(){window.removeEventListener("beforeunload",(t=>this.beforeunloadFn(t))),this.$bus.$off("btn_click_goto_top",this.btn_click_goto_top),this.$bus.$off("btn_click_loadMore",this.loadMore),this.$bus.$off("btn_click_setting",this.showSettings)}},ct=rt,ut=(i("2d52"),i("9989")),ht=Object(h["a"])(ct,o,a,!1,null,null,null);e["default"]=ht.exports;b()(ht,"components",{QPage:ut["a"]})},e60f:function(t,e,i){}}]);