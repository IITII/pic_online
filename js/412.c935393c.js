"use strict";(globalThis["webpackChunkpic_online_front"]=globalThis["webpackChunkpic_online_front"]||[]).push([[412],{54412:(e,t,i)=>{i.r(t),i.d(t,{default:()=>P});var n=i(42852),l=i(63100);function o(e,t,i,o,a,s){const r=(0,n.g2)("q-avatar"),u=(0,n.g2)("q-toolbar-title"),d=(0,n.g2)("pic-language-picker"),c=(0,n.g2)("pic-reload-files"),g=(0,n.g2)("pic-menu"),h=(0,n.g2)("q-toolbar"),f=(0,n.g2)("q-header"),p=(0,n.g2)("router-view"),k=(0,n.g2)("q-page-container"),b=(0,n.g2)("q-layout");return(0,n.uX)(),(0,n.Wv)(b,{class:"full-height-width",view:"lhh lpR lff"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",null,[(0,n.bF)(f,{class:(0,l.C4)(s.toolbar_style),elevated:"","show-if-above":""},{default:(0,n.k6)((()=>[(0,n.bF)(h,null,{default:(0,n.k6)((()=>[(0,n.bF)(r,{icon:"perm_media",onClick:s.leftDrawer},null,8,["onClick"]),(0,n.bF)(u,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(s.toolbar_title()),1)])),_:1}),(0,n.bF)(d),(0,n.bF)(c),(0,n.bF)(g,{"menu-links":s.links},null,8,["menu-links"])])),_:1})])),_:1},8,["class"])]),(0,n.bF)(k,{class:"full-height-width"},{default:(0,n.k6)((()=>[(0,n.bF)(p)])),_:1})])),_:1})}i(96809);var a=i(34299),s=i(60455),r=i(87681),u=i(55932),d=i(1846);function c(e,t,i,o,a,s){const r=(0,n.g2)("q-spinner-hourglass"),u=(0,n.g2)("q-tooltip"),d=(0,n.g2)("q-btn");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(d,{flat:"",round:"",icon:a.loadingIcon,loading:a.loading,onClick:s.reload},{loading:(0,n.k6)((()=>[(0,n.bF)(r)])),default:(0,n.k6)((()=>[(0,n.bF)(u,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.$t("reload_files")),1)])),_:1})])),_:1},8,["icon","loading","onClick"])])}const g={name:"PicReloadFiles",data(){return{loadingIcon:"autorenew",loading:!1}},methods:{reload(){const e=Date.now();return this.loading=!0,this.$axios.post("/api/file/reload",{}).then((t=>{const i=((Date.now()-e)/1e3).toFixed(2);this.$log.debug("/api/file/reload",t),this.$q.notify({type:"info",message:this.$t("success"),caption:`图片总数: ${t.imgCount}, 视频总数: ${t.videoCount}, cost: ${i}s`})})).finally((()=>{this.loading=!1}))}}};var h=i(16317),f=i(33178),p=i(28159),k=i(55497),b=i(41082),m=i.n(b);const v=(0,h.A)(g,[["render",c]]),_=v;m()(g,"components",{QBtn:f.A,QSpinnerHourglass:p.A,QTooltip:k.A});const $={name:"AdminLayout",components:{PicReloadFiles:_,PicLanguagePicker:d.A,PicMenu:r.A},computed:{...(0,a.aH)({image:e=>e.image.title,video:e=>e.video.title,user_type:e=>e.user.user_type}),toolbar_style(){return(0,u.q$)(this.user_type)},links(){return[{title:this.$t("image"),icon:"image",link:"/admin/image"},{title:this.$t("video"),icon:"movie",link:"/admin/video"},{title:this.$t("status"),icon:"dns",link:"/admin/status"},{title:this.$t("setting"),icon:"settings",link:"/admin/setting"}]}},methods:{toolbar_title(){const e=["image","video"].map((e=>({k:`/${this.user_type}/${e}`,v:e})));e.push({k:`/${this.user_type}`,v:"image"});let t="Pic Online";const i=(0,n.EW)((()=>(0,s.lq)().path)).value;for(let n of e)if(i.endsWith(n.k)){t=this[n.v]+"";break}return t},leftDrawer:function(){this.$log.debug("leftDrawer"),this.$bus.emit("btn_click_leftDrawer")}}};var A=i(49915),F=i(18351),w=i(18593),y=i(12287),q=i(71143),C=i(7984);const Q=(0,h.A)($,[["render",o]]),P=Q;m()($,"components",{QLayout:A.A,QHeader:F.A,QToolbar:w.A,QAvatar:y.A,QToolbarTitle:q.A,QPageContainer:C.A})}}]);