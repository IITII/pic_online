(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"17bf":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-layout",{staticClass:"full-height-width",attrs:{view:"lhh lpr lfr"}},[n("pic-header"),n("pic-drawer"),n("q-page-container",{staticClass:"full-height-width"},[n("router-view")],1)],1)},r=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("q-header",{attrs:{elevated:"","show-if-above":""}},[n("q-toolbar",[n("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu"},on:{click:e.leftDrawer}}),n("q-toolbar-title",[e._v("\n        "+e._s(e.selectNodeTitle)+"\n      ")]),n("pic-language-picker")],1)],1)],1)},s=[],i=n("ded3"),l=n.n(i),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("q-select",{attrs:{options:e.langOptions,color:"pink",dark:!0,"options-dark":!1,"dropdown-icon":"translate",dense:"","options-dense":!1,borderless:"","emit-value":"","map-options":""},model:{value:e.lang,callback:function(t){e.lang=t},expression:"lang"}})],1)},c=[],u={name:"PicLanguagePicker",data(){return{langOptions:[{value:"en-us",label:"English"},{value:"zh-cn",label:"简体中文"}]}},computed:{lang:{get:function(){return this.$log.debug("Get language setting"),this.$store.getters["uiControl/language"]||this.$q.lang.getLocale()||"zh-cn"},set:function(e){this.$log.debug(`Set language to ${e}`),this.$i18n.locale=e,this.$store.dispatch("uiControl/setLanguage",e)}}},beforeMount(){this.$i18n.locale=this.lang}},h=u,p=n("2877"),f=n("ddd8"),g=n("eebe"),b=n.n(g),y=Object(p["a"])(h,d,c,!1,null,"ff0507a2",null),$=y.exports;b()(y,"components",{QSelect:f["a"]});var _=n("2f62"),w={name:"PicHeader",components:{PicLanguagePicker:$},methods:{leftDrawer:function(){this.$store.dispatch("uiControl/reverseLeftDrawerOpen")}},computed:l()({},Object(_["b"])({selectNodeTitle:e=>e.uiControl.selectedNodeTitle}))},v=w,x=n("e359"),m=n("65c6"),N=n("9c40"),k=n("6ac5"),q=Object(p["a"])(v,a,s,!1,null,"8d1ee7a2",null),C=q.exports;b()(q,"components",{QHeader:x["a"],QToolbar:m["a"],QBtn:N["a"],QToolbarTitle:k["a"]});var T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("q-drawer",{attrs:{"show-if-above":"",elevated:"","content-class":"bg-grey-1"},model:{value:e.leftDrawerSync,callback:function(t){e.leftDrawerSync=t},expression:"leftDrawerSync"}},[n("div",{staticClass:"q-pa-md q-gutter-sm"},[n("div",{staticStyle:{"text-align":"center"}},[n("q-badge",{attrs:{color:e.badge.color,"text-color":e.badge.text_color}},[e._v("\n          "+e._s(e.selectNodeTitle)+"\n        ")])],1),n("div",[n("q-input",{ref:"filter",attrs:{filled:"",label:e.$t("filter")},on:{input:e.inputListener},scopedSlots:e._u([{key:"append",fn:function(){return[""!==e.tree.filter?n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"clear"},on:{click:e.resetFilter}}):e._e()]},proxy:!0}]),model:{value:e.tree.filter,callback:function(t){e.$set(e.tree,"filter",t)},expression:"tree.filter"}})],1),n("div",[n("q-tree",{ref:"qtree",attrs:{nodes:e.tree.nodes,"node-key":"nodeKey",dark:e.tree.dark,filter:e.tree.filter,expanded:e.tree.expanded,selected:e.tree.selectedNodeSync},on:{"update:expanded":function(t){return e.$set(e.tree,"expanded",t)},"update:selected":[function(t){return e.$set(e.tree,"selectedNodeSync",t)},e.update_selected]},scopedSlots:e._u([{key:"header-root",fn:function(t){return[n("div",{staticClass:"row items-center"},[e._v("\n              "+e._s(t.node.label)+"\n              "),t.node.children.length>0?n("q-badge",{staticClass:"q-ml-sm",attrs:{color:e.badge.color,"text-color":e.badge.text_color}},[e._v("\n                "+e._s(t.node.children.length)+"\n              ")]):e._e(),t.node.hasOwnProperty("fileCount")?n("q-badge",{staticClass:"q-ml-sm",attrs:{"text-color":e.badge.text_color,color:"warning"}},[e._v("\n                "+e._s(t.node.fileCount)+"\n              ")]):e._e()],1)]}}])})],1)])])],1)},K=[],S=(n("fb6a"),n("ddb0"),{name:"PicDrawer",data(){return{leftDrawerOpen:!1,tree:{filter:"",nodes:[],nodeKeyMap:new Map,expanded:[],selectedNodeSync:1,dark:!1},badge:{color:"primary",text_color:"white"}}},computed:l()(l()({},Object(_["b"])({currentNodeKey:e=>e.uiControl.nodeKey,treeUrl:e=>e.apiSetting.treeUrl,treeMethod:e=>e.apiSetting.treeMethod})),{},{leftDrawerSync:{get:function(){return this.$store.getters["uiControl/leftDrawerOpen"]},set:function(){return this.$store.dispatch("uiControl/reverseLeftDrawerOpen")}},selectNodeTitle:{get:function(){return this.$store.getters["uiControl/selectedNodeTitle"]},set:function(e){if(this.$log.debug(e),null!==e||""!==e)return this.$store.dispatch("uiControl/setSelectedNodeTitle",e)}}}),methods:{nodesToNodeKeyMap:function(e){const t=new Map;function n(e,o=1/0,r=t){o!==1/0&&r.set(e.nodeKey,o),Array.isArray(e.children)&&e.children.length>0&&e.children.forEach((t=>n(t,e.nodeKey)))}return e.forEach((e=>n(e))),t},nodeKeyMapToExpandNodes:function(e,t=1){const n=this.tree.nodeKeyMap,o=[e];let r=e;while(r!==t)r=n.get(r),o.push(r);return o},resetFilter:function(){this.tree.filter="",this.$refs.filter.focus()},inputListener:function(e){""===e?this.tree.expanded=this.nodeKeyMapToExpandNodes(this.currentNodeKey):this.$refs.qtree.expandAll()},expandNode:function(e){this.$log.debug(e)},beforeunloadFn:function(e){this.$log.debug(`before unload function ${e}`)},btn_click_nextNode:function(){this.update_selected(this.currentNodeKey+1)},update_selected:function(e){if(this.$log.debug(e),this.$log.debug(null===e),null!==e){this.$store.dispatch("uiControl/setNodeKey",e);const t=this.$refs.qtree.getNodeByKey(e);this.$store.dispatch("uiControl/setSelectedNodeTitle",t.label),this.tree.expanded=this.nodeKeyMapToExpandNodes(e),this.tree.selectedNodeSync=e}}},created(){window.addEventListener("beforeunload",(e=>this.beforeunloadFn(e))),this.$bus.$on("btn_click_nextNode",this.btn_click_nextNode)},destroyed(){window.removeEventListener("beforeunload",(e=>this.beforeunloadFn(e))),this.$bus.$off("btn_click_nextNode",this.btn_click_nextNode)},beforeMount(){},mounted(){const e=this.treeUrl;let t=null;switch(this.treeMethod){case"GET":t=this.$axios.get(e);break;case"POST":t=this.$axios.post(e);break;default:t=this.$axios.get(e);break}t.then((e=>(this.$log.debug(`Tree Res: ${JSON.stringify({status:e.status,data:e.data}).slice(0,1e3)}`),this.tree.nodes=e.data,e.data))).then((e=>(this.tree.nodeKeyMap=this.nodesToNodeKeyMap(e),this.update_selected(this.currentNodeKey),e))).then((e=>{const t=this.nodeKeyMapToExpandNodes(this.currentNodeKey);this.$log.debug(`expandedNodes: ${t}`),this.tree.expanded=t})).catch((e=>{this.$q.notify({message:this.$t("connection_fail"),caption:`${e.message}`,type:"negative"})}))}}),M=S,O=n("9404"),E=n("58a81"),D=n("27f9"),L=n("0016"),Q=n("7f41"),P=Object(p["a"])(M,T,K,!1,null,"11a1794e",null),j=P.exports;b()(P,"components",{QDrawer:O["a"],QBadge:E["a"],QInput:D["a"],QIcon:L["a"],QTree:Q["a"]});var F={name:"MainLayout",components:{PicDrawer:j,PicHeader:C}},A=F,B=n("4d5a"),H=n("09e3"),J=Object(p["a"])(A,o,r,!1,null,null,null);t["default"]=J.exports;b()(J,"components",{QLayout:B["a"],QPageContainer:H["a"]})}}]);