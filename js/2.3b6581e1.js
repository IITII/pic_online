(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"1bc9":function(t,e,i){},"2d52":function(t,e,i){"use strict";i("e60f")},"7b7f":function(t,e,i){},"7e96":function(t,e,i){"use strict";i("7b7f")},c39f:function(t,e,i){"use strict";i("1bc9")},d467:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",{staticClass:"flex flex-center full-height-width"},[i("tool-group",{staticClass:"tool-group"}),t.water_fall.show?i("vue-waterfall-easy",{ref:"waterfall",staticStyle:{"text-align":"center"},attrs:{maxCols:t.maxCols,"imgs-arr":t.water_fall.img_urls,loadingTimeOut:t.water_fall.loadingTimeOut,loadingDotCount:t.water_fall.loadingDotCount,reachBottomDistance:t.reach_bottom_distance},on:{imgError:t.imgErrorEvent,scrollReachBottom:t.loadMore},scopedSlots:t._u([{key:"default",fn:function(e){return t.show_pic_title?i("span",{staticClass:"some-info"},[t._v("\n      "+t._s(e.value.info)+"\n    ")]):t._e()}}],null,!0)},[i("div",{attrs:{slot:"waterfall-over"},slot:"waterfall-over"},[t._v("\n      "+t._s(t.$t("waterfallOver"))+"\n    ")])]):t._e()],1)},a=[],s=(i("fb6a"),i("ded3")),l=i.n(s),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",t._l(t.toolButtonGroup,(function(t){return i("tool-button",{key:t.btnColor,attrs:{"btn-icon":t.btnIcon,"btn-color":t.btnColor,"btn-on-click":t.btnOnClick,"tooltip-message":t.tooltipMessage}})})),1):t._e()},r=[],c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("q-btn",{attrs:{icon:t.btnIcon,color:t.btnColor,round:t.btnRound},on:{click:t.btnOnClick}},[0!==t.tooltipMessage.length?i("q-tooltip",{attrs:{anchor:t.tooltipAnchor,self:t.tooltipSelf}},[t._v("\n      "+t._s(t.tooltipMessage)+"\n    ")]):t._e()],1)],1)},u=[],h={name:"ToolButton",props:{btnOnClick:{type:Function,required:!0},btnIcon:{type:String,required:!0},btnColor:{type:String,required:!0,default:"primary"},btnRound:{type:Boolean,required:!1,default:!0},tooltipMessage:{type:String,required:!0,default:""},tooltipAnchor:{type:String,required:!1,default:"center left"},tooltipSelf:{type:String,required:!1,default:"center right"}}},d=h,p=i("2877"),g=i("9c40"),b=i("05c0"),m=i("eebe"),f=i.n(m),_=Object(p["a"])(d,c,u,!1,null,"3d48beb4",null),$=_.exports;f()(_,"components",{QBtn:g["a"],QTooltip:b["a"]});var w=i("2f62"),C={name:"ToolGroup",components:{ToolButton:$},data(){return{show:!0,toolButtonGroup:[{btnOnClick:this.top,btnIcon:"navigation",btnColor:"primary",tooltipMessage:""},{btnOnClick:this.nextNode,btnIcon:"redo",btnColor:"cyan-5",tooltipMessage:""},{btnOnClick:this.loadMore,btnIcon:"replay_10",btnColor:"warning",tooltipMessage:""},{btnOnClick:this.leftDrawer,btnIcon:"open_in_new",btnColor:"pink-3",tooltipMessage:""},{btnOnClick:this.setting,btnIcon:"settings",btnColor:"secondary",tooltipMessage:""}]}},computed:l()({},Object(w["b"])({refresh:t=>t.uiControl.language})),watch:{refresh:function(){this.updateLanguageCache()}},beforeMount(){this.updateLanguageCache()},methods:{updateLanguageCache:function(){const t=[this.$t("top"),this.$t("next_one"),this.$t("loadManual"),this.$t("open_drawer"),this.$t("setting")];this.toolButtonGroup.forEach(((e,i)=>{e.tooltipMessage=t[i]}))},top:function(){this.$log.debug("goto top"),this.$bus.$emit("btn_click_goto_top")},nextNode:function(){this.$log.debug("nextNode"),this.$bus.$emit("btn_click_nextNode")},loadMore:function(){this.$log.debug("loadMore"),this.$bus.$emit("btn_click_loadMore")},leftDrawer:function(){this.$store.dispatch("uiControl/reverseLeftDrawerOpen")},setting:function(){this.$log.debug("setting"),this.$bus.$emit("btn_click_setting")}}},y=C,k=Object(p["a"])(y,n,r,!1,null,"01e499e8",null),v=k.exports,q=i("6dc5"),x=i.n(q),S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("q-dialog",{ref:"dialog",on:{hide:t.onDialogHide}},[i("q-card",{staticClass:"pic_settings_card"},[i("q-tabs",{staticClass:"text-teal",attrs:{"active-bg-color":"pink-1","active-color":"pink-4","indicator-color":"pink-5"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[i("q-tab",{attrs:{label:t.$t("api_setting"),name:"api"}}),i("q-tab",{attrs:{label:t.$t("ui_setting"),name:"ui"}}),i("q-tab",{attrs:{label:t.$t("about"),name:"about"}})],1),i("q-separator"),i("q-tab-panels",{attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[i("q-tab-panel",{attrs:{name:"api"}},[i("pic-settings-api")],1),i("q-tab-panel",{attrs:{name:"ui"}},[i("pic-settings-u-i")],1),i("q-tab-panel",{attrs:{name:"about"}},[i("pic-settings-about",{attrs:{name:t.authorInfo.repo.name,author:t.authorInfo.repo.author}})],1)],1),i("q-separator"),i("q-card-section",{staticStyle:{height:"25px","text-align":"center",padding:"2px"}},[i("div",[i("a",{attrs:{href:t.authorInfo.repo.url,target:"_blank"}},[i("q-badge",{attrs:{color:t.badge.color,"text-color":t.badge.text_color,outline:""}},[t._v("\n                "+t._s(t.authorInfo.repo.url)+"\n              ")])],1)])])],1)],1)],1)},T=[],I=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("q-card-section",[i("q-form",{staticClass:"q-gutter-md",on:{submit:t.onSubmit,reset:t.onReset}},[i("q-card-section",[i("q-select",{staticStyle:{"min-width":"7rem"},attrs:{label:t.$t("tree_request_method"),options:t.api.tree.selectOptions,color:"pink",dark:!1,"options-dark":!1,dense:"","options-dense":!1,"emit-value":"","map-options":""},model:{value:t.api.tree.method,callback:function(e){t.$set(t.api.tree,"method",e)},expression:"api.tree.method"}}),i("q-input",{attrs:{label:t.$t("tree_request_url"),hint:t.api.tree.hint,"lazy-rules":!0,rules:t.api.validate.rules},model:{value:t.api.tree.url,callback:function(e){t.$set(t.api.tree,"url",e)},expression:"api.tree.url"}})],1),i("q-card-section",[i("q-select",{staticStyle:{"min-width":"7rem"},attrs:{label:t.$t("pic_request_method"),options:t.api.pic.selectOptions,color:"pink",dark:!1,"options-dark":!1,dense:"","options-dense":!1,"emit-value":"","map-options":""},model:{value:t.api.pic.method,callback:function(e){t.$set(t.api.pic,"method",e)},expression:"api.pic.method"}}),i("q-input",{attrs:{hint:t.api.pic.hint,label:t.$t("pic_request_url"),"lazy-rules":!0,rules:t.api.validate.rules},model:{value:t.api.pic.url,callback:function(e){t.$set(t.api.pic,"url",e)},expression:"api.pic.url"}})],1),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{label:t.$t("submit"),type:"submit",color:"primary"}}),i("q-btn",{attrs:{label:t.$t("reset"),type:"reset",color:"warning"},on:{dblclick:t.onResetDbClick}})],1)],1)],1)],1)},O=[],M={name:"PicSettingsApi",data(){return{api:{tree:{method:"",url:"",hint:"https://api.example.com:8000/tree",selectOptions:[{value:"GET",label:"GET",disable:!1},{value:"POST",label:"POST",disable:!0}]},pic:{method:"",url:"",hint:"https://api.example.com:8000/pic",selectOptions:[{value:"GET",label:"GET",disable:!0},{value:"POST",label:"POST",disable:!1}]},validate:{rules:[t=>t.length>0||this.$t("data_validate_error")]}}}},methods:{reset:function(){this.$log.debug("Reset form's values base on Vuex Store and localStorage"),this.api.tree.method=this.$store.getters["apiSetting/treeMethod"],this.api.tree.url=this.$store.getters["apiSetting/treeUrl"],this.api.pic.method=this.$store.getters["apiSetting/picMethod"],this.api.pic.url=this.$store.getters["apiSetting/picUrl"]},onSubmit:function(){this.$log.debug("submit"),this.$store.dispatch("apiSetting/setTreeMethod",this.api.tree.method),this.$store.dispatch("apiSetting/setTreeUrl",this.api.tree.url),this.$store.dispatch("apiSetting/setPicMethod",this.api.pic.method),this.$store.dispatch("apiSetting/setPicUrl",this.api.pic.url),this.$q.notify({message:this.$t("success"),type:"positive",closeBtn:!1,actions:[{label:this.$t("reload_page"),color:"white",handler:()=>{window.location.reload()}}]})},onReset:function(){this.$log.debug("reset"),this.reset(),this.$q.notify({message:this.$t("success"),caption:this.$t("double_click_to_clean_all"),type:"info"})},onResetDbClick:function(){this.$log.debug("Double Click..."),localStorage.clear(),this.$q.notify({message:this.$t("success"),type:"info",closeBtn:!1,actions:[{label:this.$t("reload_page"),color:"white",handler:()=>{window.location.reload()}}]})}},mounted(){this.reset()}},E=M,Q=i("a370"),D=i("0378"),K=i("ddd8"),P=i("27f9"),L=i("4b7e"),R=Object(p["a"])(E,I,O,!1,null,"17160c33",null),B=R.exports;f()(R,"components",{QCardSection:Q["a"],QForm:D["a"],QSelect:K["a"],QInput:P["a"],QCardActions:L["a"],QBtn:g["a"]});var G=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("q-card-section",[i("q-form",{staticClass:"q-gutter-md",on:{submit:t.onSubmit,reset:t.onReset}},[i("q-card-section",{staticClass:"margin0 padding0"},[i("q-input",{attrs:{label:t.$t("node_key_value"),hint:t.$t("do_not_touch"),type:"number","lazy-rules":!0,rules:t.validate.rules.greaterOrEqualZero},model:{value:t.nodeKey,callback:function(e){t.nodeKey=e},expression:"nodeKey"}}),i("q-input",{attrs:{label:t.$t("waterfall_col"),type:"number","lazy-rules":!0,rules:t.validate.rules.greaterThanZero},model:{value:t.waterfallCol,callback:function(e){t.waterfallCol=e},expression:"waterfallCol"}}),i("q-input",{attrs:{label:t.$t("waterfall_stride"),type:"number","lazy-rules":!0,rules:t.validate.rules.greaterThanZero},model:{value:t.waterfallStride,callback:function(e){t.waterfallStride=e},expression:"waterfallStride"}}),i("q-input",{attrs:{label:t.$t("img_title_max_length"),type:"number","lazy-rules":!0,rules:t.validate.rules.greaterThanZero},model:{value:t.imgTitleMaxLength,callback:function(e){t.imgTitleMaxLength=e},expression:"imgTitleMaxLength"}})],1),i("q-card-section",{staticClass:"margin0 padding0"},[i("q-list",[i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label"}},[i("q-item-section",[i("q-item-label",[t._v(t._s(t.$t("show_img_title_or_not")))])],1),i("q-item-section",{attrs:{avatar:""}},[i("q-toggle",{attrs:{"checked-icon":"check",color:"pink","keep-color":"","left-label":"","unchecked-icon":"clear"},model:{value:t.showImgTitle,callback:function(e){t.showImgTitle=e},expression:"showImgTitle"}})],1)],1),i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label"}},[i("q-item-section",[i("q-item-label",[t._v(t._s(t.$t("skip_empty_dir")))])],1),i("q-item-section",{attrs:{avatar:""}},[i("q-toggle",{attrs:{"checked-icon":"check",color:"pink","keep-color":"","left-label":"","unchecked-icon":"clear"},model:{value:t.skipEmptyDir,callback:function(e){t.skipEmptyDir=e},expression:"skipEmptyDir"}})],1)],1)],1)],1),i("q-card-actions",{staticClass:"margin0 padding0",attrs:{align:"right"}},[i("q-btn",{attrs:{label:t.$t("submit"),type:"submit",color:"primary"}}),i("q-btn",{attrs:{label:t.$t("reset"),type:"reset",color:"warning"},on:{dblclick:t.onResetDbClick}})],1)],1)],1)],1)},j=[],N={name:"PicSettingsUI",data(){return{nodeKey:0,showImgTitle:!1,skipEmptyDir:!0,waterfallCol:0,waterfallStride:0,imgTitleMaxLength:0,validate:{rules:{greaterThanZero:[t=>t>0||this.$t("data_validate_error")],greaterOrEqualZero:[t=>t>=0||this.$t("data_validate_error")]}}}},methods:{reset:function(){this.$log.debug("Reset form's values base on Vuex Store and localStorage"),this.nodeKey=this.$store.getters["uiControl/nodeKey"],this.skipEmptyDir=this.$store.getters["uiControl/skipEmptyDir"],this.waterfallCol=this.$store.getters["uiControl/waterfallCol"],this.waterfallStride=this.$store.getters["uiControl/waterfallStride"],this.imgTitleMaxLength=this.$store.getters["uiControl/imgTitleMaxLength"],this.showImgTitle=this.$store.getters["uiControl/showImgTitle"]},onSubmit:function(){this.$log.debug("submit"),this.$store.dispatch("uiControl/setNodeKey",this.nodeKey),this.$store.dispatch("uiControl/setSkipEmptyDir",this.skipEmptyDir),this.$store.dispatch("uiControl/setWaterfallCol",this.waterfallCol),this.$store.dispatch("uiControl/setWaterfallStride",this.waterfallStride),this.$store.dispatch("uiControl/setImgTitleMaxLength",this.imgTitleMaxLength),this.$store.dispatch("uiControl/setShowImgTitle",this.showImgTitle),this.$q.notify({message:this.$t("success"),type:"positive",closeBtn:!1,actions:[{label:this.$t("reload_page"),color:"white",handler:()=>{window.location.reload()}}]})},onReset:function(){this.$log.debug("reset"),this.reset(),this.$q.notify({message:this.$t("success"),caption:this.$t("double_click_to_clean_all"),type:"info"})},onResetDbClick:function(){this.$log.debug("Double Click..."),localStorage.clear(),this.$q.notify({message:this.$t("success"),type:"info",closeBtn:!1,actions:[{label:this.$t("reload_page"),color:"white",handler:()=>{window.location.reload()}}]})}},mounted(){this.reset()}},A=N,U=(i("c39f"),i("1c1c")),z=i("66e5"),F=i("4074"),Z=i("0170"),W=i("9564"),J=i("714f"),H=Object(p["a"])(A,G,j,!1,null,"51b2b369",null),V=H.exports;f()(H,"components",{QCardSection:Q["a"],QForm:D["a"],QInput:P["a"],QList:U["a"],QItem:z["a"],QItemSection:F["a"],QItemLabel:Z["a"],QToggle:W["a"],QCardActions:L["a"],QBtn:g["a"]}),f()(H,"directives",{Ripple:J["a"]});var X=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("q-card",{staticClass:"bg-secondary text-white"},[i("q-card-section",[i("div",{staticClass:"text-h6"},[t._v(t._s(t.name))]),i("div",{staticClass:"text-subtitle3"},[t._v(t._s(t.author))])]),i("q-card-section",[t._v("\n      "+t._s(t.$t("repo_description"))+"\n    ")])],1)],1)},Y=[],tt={name:"PicSettingsAbout",props:{name:{type:String,required:!1,default:"Pic Online"},author:{type:String,required:!1,default:"Github@IITII"}}},et=tt,it=i("f09f"),ot=Object(p["a"])(et,X,Y,!1,null,"6ce25203",null),at=ot.exports;f()(ot,"components",{QCard:it["a"],QCardSection:Q["a"]});var st={name:"PicSettings",components:{PicSettingsAbout:at,PicSettingsUI:V,PicSettingsApi:B},data(){return{authorInfo:{repo:{name:"Pic Online",url:"https://github.com/iitii/pic_online",author:"Github@IITII"}},badge:{color:"pink",text_color:"white"},tab:"about"}},methods:{show(){this.$log.debug("show"),this.$refs.dialog.show()},hide(){this.$log.debug("hide"),this.$refs.dialog.hide()},onDialogHide(){this.$log.debug("hide"),this.$emit("hide")},onOKClick(){this.$log.debug("onClick"),this.$emit("ok"),this.hide()},onCancelClick(){this.$log.debug("onCancelClick"),this.hide()}}},lt=st,nt=(i("7e96"),i("24e8")),rt=i("429b"),ct=i("7460"),ut=i("eb85"),ht=i("adad"),dt=i("823b"),pt=i("58a81"),gt=Object(p["a"])(lt,S,T,!1,null,"2c8aadb0",null),bt=gt.exports;f()(gt,"components",{QDialog:nt["a"],QCard:it["a"],QTabs:rt["a"],QTab:ct["a"],QSeparator:ut["a"],QTabPanels:ht["a"],QTabPanel:dt["a"],QCardSection:Q["a"],QBadge:pt["a"]});var mt={name:"PageIndex",components:{ToolGroup:v,vueWaterfallEasy:x.a},data(){return{water_fall:{show:!0,nodeKey:1,lowIndex:0,highIndex:0,img_urls:[],current_img_array:[],loadingDotCount:3,loadingTimeOut:500}}},methods:{imgErrorEvent:function(t){this.$q.notify({message:this.$t("img_load_error"),caption:`${t.src}`,type:"warning"})},beforeunloadFn:function(t){this.$log.debug(`before unload function ${t}`)},rebuildWaterfall:function(){this.water_fall.show=!1,setTimeout((()=>{this.water_fall.show=!0,0===this.water_fall.img_urls.length&&this.loadMore(this.skipEmptyDir)}),1)},btn_click_goto_top:function(){this.$log.debug(this.$refs.waterfall.$refs.scrollEl),this.$log.debug(this.$refs.waterfall.$refs.scrollEl.scrollTop),this.$log.debug("btn_click_goto_top listener"),this.$refs.waterfall.$refs.scrollEl.scrollTop=0},resetConfig:function(){this.$log.debug("Reset config"),this.water_fall.lowIndex=0,this.water_fall.highIndex=this.water_fall.lowIndex+this.stride,this.water_fall.current_img_array=[],this.water_fall.img_urls=[]},showSettings:function(){this.$log.debug("Showing setting dialog..."),this.$q.dialog({component:bt,parent:this,text:"something"}).onOk((()=>{this.$log.debug("OK")})).onCancel((()=>{this.$log.debug("Cancel")})).onDismiss((()=>{this.$log.debug("Called on OK or Cancel")}))},convertToTree:function(t){return t.map((t=>{let e=t.split("/").pop().split(".");return e.pop(),e=e.join(".").slice(0,this.maxTitleLength),{src:t,href:t,info:e}}))},loadMore:function(t=!1){const e=this.$store.getters["apiSetting/picUrl"],i=this.$store.getters["apiSetting/picMethod"];let o;const a={nodeKey:this.nodeKeyComputed,low:this.water_fall.lowIndex,high:this.water_fall.highIndex};switch(i){case"GET":o=this.$axios.get(e);break;case"POST":default:this.$log.debug(`nodeKey: ${this.nodeKeyComputed}`),this.$log.debug(`Req: ${JSON.stringify(a)}`),o=this.$axios.post(e,a);break}o.then((t=>(this.$log.debug(`Res: ${JSON.stringify({status:t.status,data:t.data})}`),this.water_fall.lowIndex=this.water_fall.highIndex,this.water_fall.highIndex+=this.stride,t.data))).then((e=>(0===e.length&&t?(this.$bus.$emit("btn_click_nextNode"),this.$q.notify({message:this.$t("skip_empty_dir"),caption:this.$t("disable_skip_empty_dir"),type:"info"})):e.length<this.stride&&(this.$refs.waterfall.waterfallOver(),this.$q.notify({message:this.$t("waterfallOver"),caption:this.$t("no_more_pic"),type:"info"})),e))).then((t=>(this.water_fall.current_img_array=t,this.water_fall.img_urls=this.water_fall.img_urls.concat(this.convertToTree(t)),t))).catch((t=>{this.$q.notify({message:this.$t("waterfall_load_error"),caption:`${t.message}`,type:"negative"})}))}},computed:l()(l()({},Object(w["b"])({maxCols:t=>t.uiControl.waterfallCol,stride:t=>t.uiControl.waterfallStride,skipEmptyDir:t=>t.uiControl.skipEmptyDir,nodeKeyComputed:t=>t.uiControl.nodeKey,show_pic_title:t=>t.uiControl.showImgTitle,maxTitleLength:t=>t.uiControl.imgTitleMaxLength})),{},{reach_bottom_distance:function(){const t=.3;return screen.height*t}}),watch:{nodeKeyComputed:function(t){this.$log.debug(`nodeKey updated: ${t}`),this.resetConfig(),this.rebuildWaterfall()}},beforeMount(){this.resetConfig()},mounted(){this.$log.debug(this.$refs),this.loadMore(this.skipEmptyDir)},created(){window.addEventListener("beforeunload",(t=>this.beforeunloadFn(t))),this.$bus.$on("btn_click_goto_top",this.btn_click_goto_top),this.$bus.$on("btn_click_loadMore",this.loadMore),this.$bus.$on("btn_click_setting",this.showSettings)},destroyed(){window.removeEventListener("beforeunload",(t=>this.beforeunloadFn(t))),this.$bus.$off("btn_click_goto_top",this.btn_click_goto_top),this.$bus.$off("btn_click_loadMore",this.loadMore),this.$bus.$off("btn_click_setting",this.showSettings)}},ft=mt,_t=(i("2d52"),i("9989")),$t=Object(p["a"])(ft,o,a,!1,null,null,null);e["default"]=$t.exports;f()($t,"components",{QPage:_t["a"]})},e60f:function(t,e,i){}}]);