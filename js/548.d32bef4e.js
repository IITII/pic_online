"use strict";(globalThis["webpackChunkpic_online_front"]=globalThis["webpackChunkpic_online_front"]||[]).push([[548],{45548:(t,e,i)=>{i.r(e),i.d(e,{default:()=>D});var n=i(83673),l=i(62323);function o(t,e,i,o,a,s){const u=(0,n.up)("q-avatar"),r=(0,n.up)("q-toolbar-title"),d=(0,n.up)("pic-language-picker"),c=(0,n.up)("pic-reload-files"),p=(0,n.up)("pic-menu"),m=(0,n.up)("q-toolbar"),g=(0,n.up)("q-header"),h=(0,n.up)("router-view"),f=(0,n.up)("q-page-container"),w=(0,n.up)("q-layout");return(0,n.wg)(),(0,n.j4)(w,{class:"full-height-width",view:"lhh lpR lff"},{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n.Wm)(g,{class:(0,l.C_)(s.toolbar_style),elevated:"","show-if-above":""},{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,{icon:"perm_media",onClick:s.leftDrawer},null,8,["onClick"]),(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(s.toolbar_title()),1)])),_:1}),(0,n.Wm)(d),(0,n.Wm)(c),(0,n.Wm)(p,{"menu-links":s.links},null,8,["menu-links"])])),_:1})])),_:1},8,["class"])]),(0,n.Wm)(f,{class:"full-height-width"},{default:(0,n.w5)((()=>[(0,n.Wm)(h)])),_:1})])),_:1})}i(65663);var a=i(10741),s=i(28339),u=i(78334),r=i(33649),d=i(78350);function c(t,e,i,o,a,s){const u=(0,n.up)("q-spinner-hourglass"),r=(0,n.up)("q-tooltip"),d=(0,n.up)("q-btn");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(d,{flat:"",round:"",icon:a.loadingIcon,loading:a.loading,onClick:s.reload},{loading:(0,n.w5)((()=>[(0,n.Wm)(u)])),default:(0,n.w5)((()=>[(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.$t("reload_files")),1)])),_:1})])),_:1},8,["icon","loading","onClick"])])}const p={name:"PicReloadFiles",data(){return{loadingIcon:"autorenew",loading:!1}},methods:{reload(){const t=Date.now();return this.loading=!0,this.$axios.post("/api/file/reload",{}).then((e=>{const i=((Date.now()-t)/1e3).toFixed(2);this.$log.debug("/api/file/reload",e),this.$q.notify({type:"info",message:this.$t("success"),caption:`图片总数: ${e.imgCount}, 视频总数: ${e.videoCount}, cost: ${i}s`})})).finally((()=>{this.loading=!1}))}}};var m=i(74260),g=i(48240),h=i(23282),f=i(5363),w=i(7518),_=i.n(w);const k=(0,m.Z)(p,[["render",c]]),v=k;_()(p,"components",{QBtn:g.Z,QSpinnerHourglass:h.Z,QTooltip:f.Z});const b={name:"AdminLayout",components:{PicReloadFiles:v,PicLanguagePicker:d.Z,PicMenu:u.Z},computed:{...(0,a.rn)({image:t=>t.image.title,video:t=>t.video.title,user_type:t=>t.user.user_type}),toolbar_style(){return(0,r.sw)(this.user_type)},links(){return[{title:this.$t("image"),icon:"image",link:"/admin/image"},{title:this.$t("video"),icon:"movie",link:"/admin/video"},{title:this.$t("status"),icon:"dns",link:"/admin/status"},{title:this.$t("setting"),icon:"settings",link:"/admin/setting"}]}},methods:{toolbar_title(){const t=["image","video"].map((t=>({k:`/${this.user_type}/${t}`,v:t})));t.push({k:`/${this.user_type}`,v:"image"});let e="Pic Online";const i=(0,n.Fl)((()=>(0,s.yj)().path)).value;for(let n of t)if(i.endsWith(n.k)){e=this[n.v]+"";break}return e},leftDrawer:function(){this.$log.debug("leftDrawer"),this.$bus.emit("btn_click_leftDrawer")}}};var $=i(83066),y=i(53812),W=i(39570),Z=i(75096),q=i(13747),C=i(72652);const Q=(0,m.Z)(b,[["render",o]]),D=Q;_()(b,"components",{QLayout:$.Z,QHeader:y.Z,QToolbar:W.Z,QAvatar:Z.Z,QToolbarTitle:q.Z,QPageContainer:C.Z})}}]);