(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"2d52":function(t,e,o){"use strict";o("e60f")},"7b7f":function(t,e,o){},"7e96":function(t,e,o){"use strict";o("7b7f")},d467:function(t,e,o){"use strict";o.r(e);o("fb6a");var i={name:"ToolButton",props:{btnOnClick:{type:Function,required:!0},btnIcon:{type:String,required:!0},btnColor:{type:String,required:!0,default:"primary"},btnRound:{type:Boolean,required:!1,default:!0},tooltipMessage:{type:String,required:!0,default:""},tooltipAnchor:{type:String,required:!1,default:"center left"},tooltipSelf:{type:String,required:!1,default:"center right"}}},a=o("2877"),s=o("9c40"),n=o("05c0"),l=o("eebe"),r=o.n(l),c=Object(a.a)(i,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("q-btn",{attrs:{icon:t.btnIcon,color:t.btnColor,round:t.btnRound},on:{click:t.btnOnClick}},[0!==t.tooltipMessage.length?o("q-tooltip",{attrs:{anchor:t.tooltipAnchor,self:t.tooltipSelf}},[t._v("\n      "+t._s(t.tooltipMessage)+"\n    ")]):t._e()],1)],1)}),[],!1,null,"3d48beb4",null),u=c.exports;r()(c,"components",{QBtn:s.a,QTooltip:n.a});var h={name:"ToolGroup",components:{ToolButton:u},data(){return{show:!0,toolButtonGroup:[{btnOnClick:this.top,btnIcon:"navigation",btnColor:"primary",tooltipMessage:this.$t("top")},{btnOnClick:this.loadMore,btnIcon:"replay_10",btnColor:"warning",tooltipMessage:this.$t("loadManual")},{btnOnClick:this.leftDrawer,btnIcon:"open_in_new",btnColor:"pink-3",tooltipMessage:this.$t("open_drawer")},{btnOnClick:this.setting,btnIcon:"settings",btnColor:"secondary",tooltipMessage:this.$t("setting")}]}},computed:{refresh:function(){return this.$store.getters["uiControl/language"]},top_computed:function(){return this.$t("top")},loadManual_computed:function(){return this.$t("loadManual")},open_drawer:function(){return this.$t("open_drawer")},setting_computed:function(){return this.$t("setting")}},watch:{refresh:function(){this.toolButtonGroup[0].tooltipMessage=this.top_computed,this.toolButtonGroup[1].tooltipMessage=this.loadManual_computed,this.toolButtonGroup[2].tooltipMessage=this.open_drawer,this.toolButtonGroup[3].tooltipMessage=this.setting_computed}},methods:{top:function(){this.$log.debug("goto top"),this.$bus.$emit("btn_click_goto_top")},loadMore:function(){this.$log.debug("loadMore"),this.$bus.$emit("btn_click_loadMore")},leftDrawer:function(){this.$store.dispatch("uiControl/reverseLeftDrawerOpen")},setting:function(){this.$log.debug("setting"),this.$bus.$emit("btn_click_setting")}}},d=Object(a.a)(h,(function(){var t=this.$createElement,e=this._self._c||t;return this.show?e("div",this._l(this.toolButtonGroup,(function(t){return e("tool-button",{key:t.btnColor,attrs:{"btn-icon":t.btnIcon,"btn-color":t.btnColor,"btn-on-click":t.btnOnClick,"tooltip-message":t.tooltipMessage}})})),1):this._e()}),[],!1,null,"1a867a5d",null).exports,p=o("6dc5"),g=o.n(p),b={name:"PicSettingsApi",data(){return{api:{tree:{method:"",url:"",hint:"https://api.example.com:8000/tree",selectOptions:[{value:"GET",label:"GET",disable:!1},{value:"POST",label:"POST",disable:!0}]},pic:{method:"",url:"",hint:"https://api.example.com:8000/pic",selectOptions:[{value:"GET",label:"GET",disable:!0},{value:"POST",label:"POST",disable:!1}]},validate:{rules:[t=>t.length>0||this.$t("data_validate_error")]}}}},methods:{reset:function(){this.$log.debug("Reset form's values base on Vuex Store and localStorage"),this.api.tree.method=this.$store.getters["apiSetting/treeMethod"],this.api.tree.url=this.$store.getters["apiSetting/treeUrl"],this.api.pic.method=this.$store.getters["apiSetting/picMethod"],this.api.pic.url=this.$store.getters["apiSetting/picUrl"]},onSubmit:function(){this.$log.debug("submit"),this.$store.dispatch("apiSetting/setTreeMethod",this.api.tree.method),this.$store.dispatch("apiSetting/setTreeUrl",this.api.tree.url),this.$store.dispatch("apiSetting/setPicMethod",this.api.pic.method),this.$store.dispatch("apiSetting/setPicUrl",this.api.pic.url),this.$q.notify({message:this.$t("success"),type:"positive",closeBtn:!1,actions:[{label:this.$t("reload_page"),color:"white",handler:()=>{window.location.reload()}}]})},onReset:function(){this.$log.debug("reset"),this.reset(),this.$q.notify({message:this.$t("success"),caption:this.$t("double_click_to_clean_all"),type:"info"})},onResetDbClick:function(){this.$log.debug("Double Click..."),localStorage.clear(),this.$q.notify({message:this.$t("success"),type:"info",closeBtn:!1,actions:[{label:this.$t("reload_page"),color:"white",handler:()=>{window.location.reload()}}]})}},mounted(){this.reset()}},f=o("a370"),m=o("0378"),_=o("ddd8"),$=o("27f9"),w=o("4b7e"),C=Object(a.a)(b,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("q-card-section",[o("q-form",{staticClass:"q-gutter-md",on:{submit:t.onSubmit,reset:t.onReset}},[o("q-card-section",[o("q-select",{staticStyle:{"min-width":"7rem"},attrs:{label:t.$t("tree_request_method"),options:t.api.tree.selectOptions,color:"pink",dark:!1,"options-dark":!1,dense:"","options-dense":!1,"emit-value":"","map-options":""},model:{value:t.api.tree.method,callback:function(e){t.$set(t.api.tree,"method",e)},expression:"api.tree.method"}}),o("q-input",{attrs:{label:t.$t("tree_request_url"),hint:t.api.tree.hint,"lazy-rules":!0,rules:t.api.validate.rules},model:{value:t.api.tree.url,callback:function(e){t.$set(t.api.tree,"url",e)},expression:"api.tree.url"}})],1),o("q-card-section",[o("q-select",{staticStyle:{"min-width":"7rem"},attrs:{label:t.$t("pic_request_method"),options:t.api.pic.selectOptions,color:"pink",dark:!1,"options-dark":!1,dense:"","options-dense":!1,"emit-value":"","map-options":""},model:{value:t.api.pic.method,callback:function(e){t.$set(t.api.pic,"method",e)},expression:"api.pic.method"}}),o("q-input",{attrs:{hint:t.api.pic.hint,label:t.$t("pic_request_url"),"lazy-rules":!0,rules:t.api.validate.rules},model:{value:t.api.pic.url,callback:function(e){t.$set(t.api.pic,"url",e)},expression:"api.pic.url"}})],1),o("q-card-actions",{attrs:{align:"right"}},[o("q-btn",{attrs:{label:t.$t("submit"),type:"submit",color:"primary"}}),o("q-btn",{attrs:{label:t.$t("reset"),type:"reset",color:"warning"},on:{dblclick:t.onResetDbClick}})],1)],1)],1)],1)}),[],!1,null,"17160c33",null),v=C.exports;r()(C,"components",{QCardSection:f.a,QForm:m.a,QSelect:_.a,QInput:$.a,QCardActions:w.a,QBtn:s.a});var y={name:"PicSettingsUI",data(){return{nodeKey:0,showImgTitle:!1,waterfallCol:0,waterfallStride:0,imgTitleMaxLength:0,validate:{rules:{greaterThanZero:[t=>t>0||this.$t("data_validate_error")],greaterOrEqualZero:[t=>t>=0||this.$t("data_validate_error")]}}}},methods:{reset:function(){this.$log.debug("Reset form's values base on Vuex Store and localStorage"),this.nodeKey=this.$store.getters["uiControl/nodeKey"],this.waterfallCol=this.$store.getters["uiControl/waterfallCol"],this.waterfallStride=this.$store.getters["uiControl/waterfallStride"],this.imgTitleMaxLength=this.$store.getters["uiControl/imgTitleMaxLength"],this.showImgTitle=this.$store.getters["uiControl/showImgTitle"]},onSubmit:function(){this.$log.debug("submit"),this.$store.dispatch("uiControl/setNodeKey",this.nodeKey),this.$store.dispatch("uiControl/setWaterfallCol",this.waterfallCol),this.$store.dispatch("uiControl/setWaterfallStride",this.waterfallStride),this.$store.dispatch("uiControl/setImgTitleMaxLength",this.imgTitleMaxLength),this.$store.dispatch("uiControl/setShowImgTitle",this.showImgTitle),this.$q.notify({message:this.$t("success"),type:"positive",closeBtn:!1,actions:[{label:this.$t("reload_page"),color:"white",handler:()=>{window.location.reload()}}]})},onReset:function(){this.$log.debug("reset"),this.reset(),this.$q.notify({message:this.$t("success"),caption:this.$t("double_click_to_clean_all"),type:"info"})},onResetDbClick:function(){this.$log.debug("Double Click..."),localStorage.clear(),this.$q.notify({message:this.$t("success"),type:"info",closeBtn:!1,actions:[{label:this.$t("reload_page"),color:"white",handler:()=>{window.location.reload()}}]})}},mounted(){this.reset()}},k=o("9564"),q=Object(a.a)(y,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("q-card-section",[o("q-form",{staticClass:"q-gutter-md",on:{submit:t.onSubmit,reset:t.onReset}},[o("q-card-section",[o("q-input",{attrs:{label:t.$t("node_key_value"),hint:t.$t("do_not_touch"),type:"number","lazy-rules":!0,rules:t.validate.rules.greaterOrEqualZero},model:{value:t.nodeKey,callback:function(e){t.nodeKey=e},expression:"nodeKey"}}),o("q-input",{attrs:{label:t.$t("waterfall_col"),type:"number","lazy-rules":!0,rules:t.validate.rules.greaterThanZero},model:{value:t.waterfallCol,callback:function(e){t.waterfallCol=e},expression:"waterfallCol"}}),o("q-input",{attrs:{label:t.$t("waterfall_stride"),type:"number","lazy-rules":!0,rules:t.validate.rules.greaterThanZero},model:{value:t.waterfallStride,callback:function(e){t.waterfallStride=e},expression:"waterfallStride"}}),o("q-input",{attrs:{label:t.$t("img_title_max_length"),type:"number","lazy-rules":!0,rules:t.validate.rules.greaterThanZero},model:{value:t.imgTitleMaxLength,callback:function(e){t.imgTitleMaxLength=e},expression:"imgTitleMaxLength"}})],1),o("q-card-section",[o("q-toggle",{attrs:{"checked-icon":"check",color:"pink",label:t.$t("show_img_title_or_not")+": "+t.showImgTitle,"unchecked-icon":"clear"},model:{value:t.showImgTitle,callback:function(e){t.showImgTitle=e},expression:"showImgTitle"}})],1),o("q-card-actions",{attrs:{align:"right"}},[o("q-btn",{attrs:{label:t.$t("submit"),type:"submit",color:"primary"}}),o("q-btn",{attrs:{label:t.$t("reset"),type:"reset",color:"warning"},on:{dblclick:t.onResetDbClick}})],1)],1)],1)],1)}),[],!1,null,"1f358a02",null),S=q.exports;r()(q,"components",{QCardSection:f.a,QForm:m.a,QInput:$.a,QToggle:k.a,QCardActions:w.a,QBtn:s.a});var x={name:"PicSettingsAbout",props:{name:{type:String,required:!1,default:"Pic Online"},author:{type:String,required:!1,default:"Github@IITII"}}},T=o("f09f"),I=Object(a.a)(x,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("q-card",{staticClass:"bg-secondary text-white"},[o("q-card-section",[o("div",{staticClass:"text-h6"},[t._v(t._s(t.name))]),o("div",{staticClass:"text-subtitle3"},[t._v(t._s(t.author))])]),o("q-card-section",[t._v("\n      "+t._s(t.$t("repo_description"))+"\n    ")])],1)],1)}),[],!1,null,"6ce25203",null),M=I.exports;r()(I,"components",{QCard:T.a,QCardSection:f.a});var O={name:"PicSettings",components:{PicSettingsAbout:M,PicSettingsUI:S,PicSettingsApi:v},data:()=>({authorInfo:{repo:{name:"Pic Online",url:"https://github.com/iitii/pic_online",author:"Github@IITII"}},badge:{color:"pink",text_color:"white"},tab:"about"}),methods:{show(){this.$log.debug("show"),this.$refs.dialog.show()},hide(){this.$log.debug("hide"),this.$refs.dialog.hide()},onDialogHide(){this.$log.debug("hide"),this.$emit("hide")},onOKClick(){this.$log.debug("onClick"),this.$emit("ok"),this.hide()},onCancelClick(){this.$log.debug("onCancelClick"),this.hide()}}},Q=(o("7e96"),o("24e8")),E=o("429b"),K=o("7460"),P=o("eb85"),B=o("adad"),D=o("823b"),G=o("58a81"),L=Object(a.a)(O,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("q-dialog",{ref:"dialog",on:{hide:t.onDialogHide}},[o("q-card",{staticClass:"pic_settings_card"},[o("q-tabs",{staticClass:"text-teal",attrs:{"active-bg-color":"pink-1","active-color":"pink-4","indicator-color":"pink-5"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[o("q-tab",{attrs:{label:t.$t("api_setting"),name:"api"}}),o("q-tab",{attrs:{label:t.$t("ui_setting"),name:"ui"}}),o("q-tab",{attrs:{label:t.$t("about"),name:"about"}})],1),o("q-separator"),o("q-tab-panels",{attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[o("q-tab-panel",{attrs:{name:"api"}},[o("pic-settings-api")],1),o("q-tab-panel",{attrs:{name:"ui"}},[o("pic-settings-u-i")],1),o("q-tab-panel",{attrs:{name:"about"}},[o("pic-settings-about",{attrs:{name:t.authorInfo.repo.name,author:t.authorInfo.repo.author}})],1)],1),o("q-separator"),o("q-card-section",{staticStyle:{height:"25px","text-align":"center",padding:"2px"}},[o("div",[o("a",{attrs:{href:t.authorInfo.repo.url,target:"_blank"}},[o("q-badge",{attrs:{color:t.badge.color,"text-color":t.badge.text_color,outline:""}},[t._v("\n                "+t._s(t.authorInfo.repo.url)+"\n              ")])],1)])])],1)],1)],1)}),[],!1,null,"2c8aadb0",null),R=L.exports;r()(L,"components",{QDialog:Q.a,QCard:T.a,QTabs:E.a,QTab:K.a,QSeparator:P.a,QTabPanels:B.a,QTabPanel:D.a,QCardSection:f.a,QBadge:G.a});var j={name:"PageIndex",components:{ToolGroup:d,vueWaterfallEasy:g.a},data:()=>({water_fall:{show:!0,nodeKey:1,lowIndex:0,highIndex:0,img_urls:[],current_img_array:[],loadingDotCount:3,loadingTimeOut:500}}),methods:{imgErrorEvent:function(t){this.$q.notify({message:this.$t("img_load_error"),caption:""+t.src,type:"warning"})},beforeunloadFn:function(t){this.$log.debug("before unload function "+t)},rebuildWaterfall:function(){this.water_fall.show=!1,setTimeout(()=>{this.water_fall.show=!0,0===this.water_fall.img_urls.length&&this.loadMore()},1)},btn_click_goto_top:function(){this.$log.debug("btn_click_goto_top listener"),this.rebuildWaterfall()},resetConfig:function(){this.$log.debug("Reset config"),this.water_fall.lowIndex=0,this.water_fall.highIndex=this.water_fall.lowIndex+this.stride,this.water_fall.current_img_array=[],this.water_fall.img_urls=[]},showSettings:function(){this.$log.debug("Showing setting dialog..."),this.$q.dialog({component:R,parent:this,text:"something"}).onOk(()=>{this.$log.debug("OK")}).onCancel(()=>{this.$log.debug("Cancel")}).onDismiss(()=>{this.$log.debug("Called on OK or Cancel")})},convertToTree:function(t){return t.map(t=>{let e=t.split("/").pop().split(".");return e.pop(),e=e.join(".").slice(0,this.maxTitleLength),{src:t,href:t,info:e}})},loadMore:function(){const t=this.$store.getters["apiSetting/picUrl"],e=this.$store.getters["apiSetting/picMethod"];let o;const i={nodeKey:this.nodeKeyComputed,low:this.water_fall.lowIndex,high:this.water_fall.highIndex};switch(e){case"GET":o=this.$axios.get(t);break;case"POST":default:this.$log.debug("nodeKey: "+this.nodeKeyComputed),this.$log.debug("post data: "+JSON.stringify(i)),o=this.$axios.post(t,i)}o.then(t=>(this.$log.debug("axios post response: "+JSON.stringify(t)),this.water_fall.lowIndex=this.water_fall.highIndex,this.water_fall.highIndex+=this.stride,t.data)).then(t=>(this.water_fall.current_img_array=t,this.water_fall.img_urls=this.water_fall.img_urls.concat(this.convertToTree(t)),t)).then(t=>{t.length<this.stride&&(this.$refs.waterfall.waterfallOver(),this.$q.notify({message:this.$t("waterfallOver"),caption:this.$t("no_more_pic"),type:"info"}))}).catch(t=>{this.$q.notify({message:this.$t("waterfall_load_error"),caption:""+t.message,type:"negative"})})}},computed:{nodeKeyComputed:function(){return this.$store.getters["uiControl/nodeKey"]},stride:function(){return this.$store.getters["uiControl/waterfallStride"]},reach_bottom_distance:function(){return.3*screen.height},show_pic_title:function(){return this.$store.getters["uiControl/showImgTitle"]},maxTitleLength:function(){return this.$store.getters["uiControl/imgTitleMaxLength"]},maxCols:function(){return this.$store.getters["uiControl/waterfallCol"]}},watch:{nodeKeyComputed:function(t){this.$log.debug("nodeKey updated: "+t),this.resetConfig(),this.rebuildWaterfall()}},beforeMount(){this.resetConfig()},mounted(){this.$log.debug(this.$refs),this.loadMore()},created(){window.addEventListener("beforeunload",t=>this.beforeunloadFn(t)),this.$bus.$on("btn_click_goto_top",this.btn_click_goto_top),this.$bus.$on("btn_click_loadMore",this.loadMore),this.$bus.$on("btn_click_setting",this.showSettings)},destroyed(){window.removeEventListener("beforeunload",t=>this.beforeunloadFn(t)),this.$bus.$off("btn_click_goto_top",this.btn_click_goto_top),this.$bus.$off("btn_click_loadMore",this.loadMore),this.$bus.$off("btn_click_setting",this.showSettings)}},A=(o("2d52"),o("9989")),U=Object(a.a)(j,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-page",{staticClass:"flex flex-center full-height-width"},[o("tool-group",{staticClass:"tool-group"}),t.water_fall.show?o("vue-waterfall-easy",{ref:"waterfall",attrs:{maxCols:t.maxCols,"imgs-arr":t.water_fall.img_urls,loadingTimeOut:t.water_fall.loadingTimeOut,loadingDotCount:t.water_fall.loadingDotCount,reachBottomDistance:t.reach_bottom_distance},on:{imgError:t.imgErrorEvent,scrollReachBottom:t.loadMore},scopedSlots:t._u([{key:"default",fn:function(e){return t.show_pic_title?o("span",{staticClass:"some-info"},[t._v("\n      "+t._s(e.value.info)+"\n    ")]):t._e()}}],null,!0)},[o("div",{attrs:{slot:"waterfall-over"},slot:"waterfall-over"},[t._v("\n      "+t._s(t.$t("waterfallOver"))+"\n    ")])]):t._e()],1)}),[],!1,null,null,null);e.default=U.exports;r()(U,"components",{QPage:A.a})},e60f:function(t,e,o){}}]);
//# sourceMappingURL=2.80e06ba1.js.map