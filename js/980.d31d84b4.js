"use strict";(globalThis["webpackChunkpic_online_front"]=globalThis["webpackChunkpic_online_front"]||[]).push([[980],{20980:(e,t,n)=>{n.r(t),n.d(t,{default:()=>le});var o=n(42852);const a={class:"q-pt-md"};function l(e,t,n,l,s,r){const i=(0,o.g2)("moleculer-status");return(0,o.uX)(),(0,o.CE)("div",a,[(0,o.bF)(i)])}var s=n(63100);const r=["href"];function i(e,t,n,a,l,i){const c=(0,o.g2)("q-tab"),d=(0,o.g2)("q-tabs"),u=(0,o.g2)("q-separator"),b=(0,o.g2)("moleculer-configuration"),p=(0,o.g2)("q-tab-panel"),m=(0,o.g2)("moleculer-nodes"),g=(0,o.g2)("moleculer-services"),h=(0,o.g2)("q-tab-panels"),f=(0,o.g2)("q-badge"),v=(0,o.g2)("q-card-section"),k=(0,o.g2)("q-card");return(0,o.uX)(),(0,o.Wv)(k,null,{default:(0,o.k6)((()=>[(0,o.bF)(d,{modelValue:l.selectTab,"onUpdate:modelValue":t[0]||(t[0]=e=>l.selectTab=e),"active-bg-color":"pink-1","active-color":"pink-4",align:"justify",class:"text-teal","indicator-color":"pink-5"},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.tabs,(t=>((0,o.uX)(),(0,o.Wv)(c,{key:t,label:e.$t(t),name:t},null,8,["label","name"])))),128))])),_:1},8,["modelValue"]),(0,o.bF)(u),(0,o.bF)(h,{modelValue:l.selectTab,"onUpdate:modelValue":t[1]||(t[1]=e=>l.selectTab=e),animated:""},{default:(0,o.k6)((()=>[(0,o.bF)(p,{name:l.tabs[0]},{default:(0,o.k6)((()=>[(0,o.bF)(b)])),_:1},8,["name"]),(0,o.bF)(p,{name:l.tabs[1]},{default:(0,o.k6)((()=>[(0,o.bF)(m)])),_:1},8,["name"]),(0,o.bF)(p,{name:l.tabs[2]},{default:(0,o.k6)((()=>[(0,o.bF)(g)])),_:1},8,["name"])])),_:1},8,["modelValue"]),(0,o.bF)(u),(0,o.bF)(v,{style:{height:"25px","text-align":"center",padding:"2px"}},{default:(0,o.k6)((()=>[(0,o.Lk)("a",{href:l.authorInfo.repo.url,style:{"text-decoration":"none"},target:"_blank"},[(0,o.bF)(f,{color:l.badge.color,"text-color":l.badge.text_color,outline:""},{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(l.authorInfo.repo.url),1)])),_:1},8,["color","text-color"])],8,r)])),_:1})])),_:1})}var c=n(89006);const d={class:"boxes"},u={class:"text-subtitle2 text-center"},b={class:"text-center"},p={class:"text-center"},m={class:"JavaScript"};function g(e,t,n,a,l,r){const i=(0,o.g2)("q-card-section"),g=(0,o.g2)("q-card"),h=(0,o.g2)("q-separator"),f=(0,o.g2)("q-btn"),v=(0,o.gN)("highlightjs");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",d,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(Object.keys(r.configure),(t=>((0,o.uX)(),(0,o.Wv)(g,{key:t,class:"q-ma-sm bg-secondary text-white"},{default:(0,o.k6)((()=>[(0,o.bF)(i,null,{default:(0,o.k6)((()=>[(0,o.Lk)("div",u,(0,s.v_)(e.$t(t)),1),(0,o.Lk)("div",b,(0,s.v_)(r.configure[t]),1)])),_:2},1024)])),_:2},1024)))),128))]),(0,o.bF)(h),(0,o.Lk)("div",p,[(0,o.bF)(f,{label:e.$t("show_broker_config"),class:"q-ma-sm",onClick:t[0]||(t[0]=e=>l.showBroker=!l.showBroker)},null,8,["label"]),(0,o.bo)((0,o.Lk)("div",null,[(0,o.bo)(((0,o.uX)(),(0,o.CE)("pre",null,[(0,o.Lk)("code",m,(0,s.v_)(l.broker),1)])),[[v]])],512),[[c.aG,l.showBroker]])])])}const h={name:"MoleculerConfiguration",components:{},data(){return{showBroker:!1,loading:!1,broker:null}},computed:{configure(){const e=this.broker;return e?{namespace:e.namespace||"<not set>",transporter:e.transporter||"<no transporter>",serializer:e.serializer||"JSON",strategy:e.registry.strategy||"Round Robin",cacher:e.cacher?"Enabled":"Disabled",logger:e.logger?"Enabled":"Disabled",metrics:e.metrics.enabled?"Enabled":"Disabled",tracing:e.tracing.enabled?"Enabled":"Disabled"}:{}}},methods:{getConfiguration(){this.loading=!0,this.$axios.get("/dev/~node/options").then((e=>this.broker=e)).then((()=>this.loading=!1)).catch((e=>this.$q.notify({type:"error",message:e.response?.data?.message||e.message})))}},mounted(){this.$q.dark.isActive?n.e(121).then(n.bind(n,84544)):n.e(121).then(n.bind(n,8838)),this.getConfiguration()}};var f=n(16317),v=n(44483),k=n(91656),_=n(81177),F=n(33178),y=n(41082),x=n.n(y);const A=(0,f.A)(h,[["render",g],["__scopeId","data-v-5b2f9097"]]),q=A;x()(h,"components",{QCard:v.A,QCardSection:k.A,QSeparator:_.A,QBtn:F.A});const w={class:"col-2 q-table__title"},$={class:"full-width row flex-center text-accent q-gutter-sm"};function C(e,t,n,a,l,r){const i=(0,o.g2)("q-space"),c=(0,o.g2)("q-icon"),d=(0,o.g2)("q-input"),u=(0,o.g2)("q-btn"),b=(0,o.g2)("q-badge"),p=(0,o.g2)("q-td"),m=(0,o.g2)("q-table");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(m,{columns:r.getCols,rows:l.nodes,filter:l.filter,loading:l.firstLoad&&l.loading,"no-data-label":e.$t("no_data_label"),"no-results-label":e.$t("no_result_label"),title:e.$t("node_status"),"row-key":"node_id"},{top:(0,o.k6)((n=>[(0,o.Lk)("div",w,(0,s.v_)(e.$t("node_status")),1),(0,o.bF)(i),(0,o.bF)(d,{modelValue:l.filter,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filter=e),placeholder:e.$t("search"),borderless:"",debounce:"300",dense:""},{append:(0,o.k6)((()=>[(0,o.bF)(c,{name:"search"})])),_:1},8,["modelValue","placeholder"]),(0,o.bF)(u,{class:"q-ml-md",flat:"",icon:"archive","no-caps":"",round:"",onClick:r.exportTable},null,8,["onClick"]),(0,o.bF)(u,{icon:n.inFullscreen?"fullscreen_exit":"fullscreen",dense:"",flat:"",round:"",onClick:n.toggleFullscreen},null,8,["icon","onClick"])])),"body-cell":(0,o.k6)((e=>[(0,o.bF)(p,{props:e},{default:(0,o.k6)((()=>[(0,o.bF)(b,{label:e.value,color:"primary"},null,8,["label"])])),_:2},1032,["props"])])),"no-data":(0,o.k6)((({icon:e,message:t,filter:n})=>[(0,o.Lk)("div",$,[(0,o.bF)(c,{name:"sentiment_dissatisfied",size:"2em"}),(0,o.Lk)("span",null,(0,s.v_)(t),1),(0,o.bF)(c,{name:n?"filter_b_and_w":e,size:"2em"},null,8,["name"])])])),_:1},8,["columns","rows","filter","loading","no-data-label","no-results-label","title"])])}n(96809);var Q=n(73247);function X(e,t){let n=void 0!==t?t(e):e;return n=void 0===n||null===n?"":String(n),n=n.split('"').join('""'),`"${n}"`}const W={name:"MoleculerNodes",components:{},data(){return{firstLoad:!0,loading:!1,timer:null,filter:"",nodes:[]}},computed:{getCols(){const e=this.nodes;if(e.length<1)return[];const t=e[0],n=[];for(const o in t)n.push({name:o,align:"left",field:o,sortable:!0,format:e=>`${e}`,label:this.$t(o).toUpperCase()});return n}},methods:{getNodes(){return this.loading=!0,this.$axios.get("/dev/~node/list").then((e=>e.map((e=>({node_id:e.id,type:e.client.type,version:e.client.version,ip:e.ipList[0],hostname:e.hostname,status:e.available,cpu:e.cpu}))))).then((e=>this.nodes=e)).then((()=>{this.firstLoad=!1,this.loading=!1})).catch((e=>this.$q.notify({type:"error",message:e.response?.data?.message||e.message})))},exportTable(){const e=[this.cols.map((e=>X(e.label)))].concat(this.data.map((e=>this.cols.map((t=>X("function"===typeof t.field?t.field(e):e[void 0===t.field?t.name:t.field],t.format))).join(",")))).join("\r\n"),t=(0,Q.A)("table-export.csv",e,"text/csv");!0!==t&&this.$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}},mounted(){this.getNodes()}};var T=n(28296),I=n(49055),S=n(17316),E=n(58219),L=n(79919),j=n(79097);const B=(0,f.A)(W,[["render",C]]),V=B;x()(W,"components",{QTable:T.A,QSpace:I.A,QInput:S.A,QIcon:E.A,QBtn:F.A,QTd:L.A,QBadge:j.A});const z={class:"col-2 q-table__title"},M={class:"full-width row flex-center text-accent q-gutter-sm"};function N(e,t,n,a,l,r){const i=(0,o.g2)("q-space"),d=(0,o.g2)("q-icon"),u=(0,o.g2)("q-input"),b=(0,o.g2)("q-btn"),p=(0,o.g2)("q-th"),m=(0,o.g2)("q-tr"),g=(0,o.g2)("q-td"),h=(0,o.g2)("q-badge"),f=(0,o.g2)("q-table");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(f,{columns:r.columns,rows:l.service,expanded:l.expanded,"onUpdate:expanded":t[1]||(t[1]=e=>l.expanded=e),title:e.$t("service_action"),filter:l.filter,"hide-bottom":l.table.hide_bottom,"no-data-label":e.$t("no_data_label"),"no-results-label":e.$t("no_result_label"),flat:"","row-key":"service_action"},{top:(0,o.k6)((n=>[(0,o.Lk)("div",z,(0,s.v_)(e.$t("service_action")),1),(0,o.bF)(i),(0,o.bF)(u,{modelValue:l.filter,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filter=e),placeholder:e.$t("search"),borderless:"",debounce:"300",dense:""},{append:(0,o.k6)((()=>[(0,o.bF)(d,{name:"search"})])),_:1},8,["modelValue","placeholder"]),(0,o.bF)(b,{class:"q-ml-md",flat:"",icon:"archive","no-caps":"",round:"",onClick:r.exportTable},null,8,["onClick"]),(0,o.bF)(b,{icon:n.inFullscreen?"fullscreen_exit":"fullscreen",dense:"",flat:"",round:"",onClick:n.toggleFullscreen},null,8,["icon","onClick"])])),header:(0,o.k6)((e=>[(0,o.bF)(m,{props:e},{default:(0,o.k6)((()=>[(0,o.bF)(p,{"auto-width":""}),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.cols,(t=>((0,o.uX)(),(0,o.Wv)(p,{key:t.name,props:e},{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(t.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,o.k6)((t=>[((0,o.uX)(),(0,o.Wv)(m,{key:t.row.service_action,props:t},{default:(0,o.k6)((()=>[(0,o.bF)(g,{"auto-width":""},{default:(0,o.k6)((()=>[(0,o.bF)(b,{icon:t.expand?"remove":"add",color:"accent",dense:"",round:"",size:"sm",onClick:e=>t.expand=!t.expand},null,8,["icon","onClick"])])),_:2},1024),(0,o.bF)(g,{key:"service_action",props:t},{default:(0,o.k6)((()=>[(0,o.bF)(h,{label:t.row.service_action,color:"accent"},null,8,["label"]),t.row.version?((0,o.uX)(),(0,o.Wv)(h,{key:0,label:t.row.version},null,8,["label"])):(0,o.Q3)("",!0)])),_:2},1032,["props"]),(0,o.bF)(g,{key:"rest",props:t},{default:(0,o.k6)((()=>[(0,o.bF)(h,{label:t.row.rest,color:"brown"},null,8,["label"])])),_:2},1032,["props"]),(0,o.bF)(g,{key:"parameters",props:t},{default:(0,o.k6)((()=>[t.row.parameters?((0,o.uX)(),(0,o.Wv)(h,{key:0,label:t.row.parameters,color:"blue-grey"},null,8,["label"])):(0,o.Q3)("",!0)])),_:2},1032,["props"]),(0,o.bF)(g,{key:"instances",props:t},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.row.instance,(e=>((0,o.uX)(),(0,o.Wv)(h,{key:e,label:e,color:"primary"},null,8,["label"])))),128))])),_:2},1032,["props"]),(0,o.bF)(g,{key:"status",props:t},{default:(0,o.k6)((()=>[t.row.status?((0,o.uX)(),(0,o.Wv)(h,{key:0,label:e.$t("online"),color:"green"},null,8,["label"])):((0,o.uX)(),(0,o.Wv)(h,{key:1,label:e.$t("offline"),color:"red"},null,8,["label"]))])),_:2},1032,["props"])])),_:2},1032,["props"])),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.getServiceActions(t.row.service_action),(n=>(0,o.bo)(((0,o.uX)(),(0,o.Wv)(m,{key:n.name,props:t},{default:(0,o.k6)((()=>[(0,o.bF)(g,{"auto-width":""}),(0,o.bF)(g,{key:"service_action"},{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(n.name)+" ",1),n.action.cache?((0,o.uX)(),(0,o.Wv)(h,{key:0,label:e.$t("cached"),color:"orange"},null,8,["label"])):(0,o.Q3)("",!0)])),_:2},1024),(0,o.bF)(g,{key:"rest"},{default:(0,o.k6)((()=>[r.getActionRest(n,t.row).method?((0,o.uX)(),(0,o.Wv)(h,{key:0,label:r.getActionRest(n,t.row).method,color:"indigo"},null,8,["label"])):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,s.v_)(r.getActionRest(n,t.row).url),1)])),_:2},1024),(0,o.bF)(g,{key:"parameters"},{default:(0,o.k6)((()=>[(0,o.eW)((0,s.v_)(r.getActionParams(n,40)),1)])),_:2},1024),(0,o.bF)(g,{key:"instances"}),(0,o.bF)(g,{key:"status"},{default:(0,o.k6)((()=>[n.available?((0,o.uX)(),(0,o.Wv)(h,{key:0,label:e.$t("online"),color:"green"},null,8,["label"])):((0,o.uX)(),(0,o.Wv)(h,{key:1,label:e.$t("offline"),color:"red"},null,8,["label"]))])),_:2},1024)])),_:2},1032,["props"])),[[c.aG,t.expand]]))),128))])),"no-data":(0,o.k6)((({icon:e,message:t,filter:n})=>[(0,o.Lk)("div",M,[(0,o.bF)(d,{name:"sentiment_dissatisfied",size:"2em"}),(0,o.Lk)("span",null,(0,s.v_)(t),1),(0,o.bF)(d,{name:n?"filter_b_and_w":e,size:"2em"},null,8,["name"])])])),_:1},8,["columns","rows","expanded","title","filter","hide-bottom","no-data-label","no-results-label"])])}function U(e,t){let n=void 0!==t?t(e):e;return n=void 0===n||null===n?"":String(n),n=n.split('"').join('""'),`"${n}"`}const P={name:"MoleculerServices",data(){return{table:{hide_bottom:!1},timer:null,filter:"",expanded:[],service:[],actions:{}}},computed:{computedExpanded(){return this.service.map((e=>e.service_action))},columns(){const e="service_action,rest,parameters,instances,status".split(",");return e.map((e=>({name:e,align:"left",field:e,sortable:!0,format:e=>`${e}`,label:this.$t(e).toUpperCase()})))}},methods:{getActions(){return this.$axios.get("/dev/~node/actions").then((e=>e.filter((e=>!e.name.startsWith("$"))))).then((e=>(e.sort(((e,t)=>e.name.localeCompare(t.name))),e.reduce(((e,t)=>(e[t.name]=t,e)),{})))).then((e=>this.actions=e)).catch((e=>this.$q.notify({type:"error",message:e.response?.data?.message||e.message})))},getService(){return this.$axios.get("/dev/~node/services").then((e=>e.filter((e=>!e.name.startsWith("$"))))).then((e=>(e.sort(((e,t)=>e.name.localeCompare(t.name))),e.forEach((e=>e.nodes.sort())),e))).then((e=>e.map((e=>({service_action:e.name,version:e.version,rest:e.settings.rest?e.settings.rest:`/${e.fullName}`,parameters:void 0,instance:e.nodes,status:e.nodes.length>0}))))).then((e=>this.service=e)).catch((e=>this.$q.notify({type:"error",message:e.response?.data?.message||e.message})))},getServiceActions(e){return Object.keys(this.actions).filter((t=>t.startsWith(`${e}.`))).map((e=>this.actions[e]))},getActionRest(e,t="test"){const n={method:"",url:""};if(e.action.rest){if("string"==typeof e.action.rest){const t=e.action.rest.split(" ");t.length>1?(n.method=t[0],n.url=t[1]):(n.method="*",n.url=t[0])}else n.method=e.action.rest.method||"*",n.url=e.action.rest.path;n.url=t.rest+n.url}return n},getActionParams(e,t){if(e.action&&e.action.params){const n=Object.keys(e.action.params).join(", ");return n.length>t?n.substr(0,t)+"…":n}return""},exportTable(){const e=[this.cols.map((e=>U(e.label)))].concat(this.data.map((e=>this.cols.map((t=>U("function"===typeof t.field?t.field(e):e[void 0===t.field?t.name:t.field],t.format))).join(",")))).join("\r\n"),t=(0,Q.A)("table-export.csv",e,"text/csv");!0!==t&&this.$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}},mounted(){this.getActions().then((e=>this.getService())).then((()=>this.expanded=this.computedExpanded)).then((()=>this.timer=setInterval((()=>{this.getActions().then((e=>this.getService()))}),3e3))).then((()=>this.$bus.once("hook:beforeDestroy",(e=>clearInterval(this.timer)))))}};var R=n(78973),D=n(66723);const K=(0,f.A)(P,[["render",N]]),O=K;x()(P,"components",{QTable:T.A,QSpace:I.A,QInput:S.A,QIcon:E.A,QBtn:F.A,QTr:R.A,QTh:D.A,QTd:L.A,QBadge:j.A});const G="configure,nodes,services".split(","),J={name:"index",components:{MoleculerServices:O,MoleculerNodes:V,MoleculerConfiguration:q},data(){return{authorInfo:{repo:{name:"Pic Online",url:"https://github.com/iitii/pic_online",author:"Github@IITII"}},badge:{color:"pink",text_color:"white"},tabs:G,selectTab:G[0]}}};var H=n(12979),Y=n(5415),Z=n(53472),ee=n(56565);const te=(0,f.A)(J,[["render",i],["__scopeId","data-v-21d83a05"]]),ne=te;x()(J,"components",{QCard:v.A,QTabs:H.A,QTab:Y.A,QSeparator:_.A,QTabPanels:Z.A,QTabPanel:ee.A,QCardSection:k.A,QBadge:j.A});const oe={name:"PicServerStatus",components:{MoleculerStatus:ne}},ae=(0,f.A)(oe,[["render",l]]),le=ae}}]);